(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84a5bb80"],{5405:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"d-mb-10",attrs:{type:"primary",size:"mini"},on:{click:t.add}},[t._v("添加管理员")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading__,expression:"loading__"}],attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"id"}}),a("el-table-column",{attrs:{prop:"account",label:"账号"}}),a("el-table-column",{attrs:{prop:"head_pic",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("img",{staticClass:"d-border-radius",staticStyle:{width:"40px",height:"40px"},attrs:{src:e.head_pic,alt:e.account}})]}}])}),a("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return t._l(n.roles,(function(e,n){return a("el-tag",{key:n,staticClass:"d-mr-10",attrs:{type:"primary"}},[t._v(t._s(e.role_name))])}))}}])}),a("el-table-column",{attrs:{prop:"login_count",label:"登陆次数"}}),a("el-table-column",{attrs:{prop:"last_time",label:"登录时间"}}),a("el-table-column",{attrs:{prop:"last_ip",label:"登陆ip"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.level?a("el-switch",{attrs:{"active-value":1},on:{change:function(e){return t.changeSwitch(n)}},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"row.status"}}):a("div",[t._v("正常")])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.edit(n.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.del(n.id)}}},[t._v("删除")])]}}])})],1),a("pagination",{attrs:{total:t.total__,page:t.currentPage__,limit:t.limit__},on:{"update:page":function(e){t.currentPage__=e},"update:limit":function(e){t.limit__=e},pagination:t.initData}})],1),a("admin-form",{ref:"adminForm",attrs:{title:t.title},on:{initData:t.initData}})],1)},o=[],r=a("a682"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"管理员账号"}},[a("el-input",{attrs:{maxlength:"16","auto-complete":"off",placeholder:"请输入管理员账号"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("el-form-item",{attrs:{label:"管理员昵称"}},[a("el-input",{attrs:{maxlength:"30",placeholder:"请输入管理员昵称"},model:{value:t.form.real_name,callback:function(e){t.$set(t.form,"real_name",e)},expression:"form.real_name"}})],1),a("el-form-item",{attrs:{label:"管理员密码"}},[t.isEdit?a("el-input",{attrs:{"show-password":"",placeholder:"请输入管理员密码（可选）"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}):a("el-input",{attrs:{"show-password":"",placeholder:"请输入管理员密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"确认密码"}},[t.isEdit?a("el-input",{attrs:{"show-password":"",placeholder:"请再次输入密码（可选）"},model:{value:t.form.enter_pwd,callback:function(e){t.$set(t.form,"enter_pwd",e)},expression:"form.enter_pwd"}}):a("el-input",{attrs:{"show-password":"",placeholder:"请再次输入密码"},model:{value:t.form.enter_pwd,callback:function(e){t.$set(t.form,"enter_pwd",e)},expression:"form.enter_pwd"}})],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{staticClass:"d-w-100",attrs:{multiple:"",placeholder:"请选择角色"},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}},t._l(t.roleList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.role_name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{attrs:{"active-value":1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.handleClose}},[t._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save}},[t._v("保 存")])],1)],1)],1)},l=[],s=a("90e7"),c={props:{title:{type:String,default:""}},data:function(){return{isEdit:!1,dialogFormVisible:!1,form:{account:"",real_name:"",password:"",enter_pwd:"",roles:[],status:1},roleList:[]}},methods:{initData:function(){var t=this;Object(s["c"])().then((function(e){t.roleList=e.data}))},getDetail:function(t){var e=this;Object(s["d"])(t).then((function(t){e.form=t.data})).catch((function(){}))},save:function(){var t=this;if(!this.form.account)return this.$message.error("请填写管理员账号");if(!this.form.real_name)return this.$message.error("请填写管理员昵称");if(!this.isEdit&&!this.form.password)return this.$message.error("请填写管理员密码");if(this.form.password){if(this.form.password.length<6)return this.$message.error("管理员密码不能小于6位");if(this.form.password!==this.form.enter_pwd)return this.$message.error("两次密码输入不一致")}if(0===this.form.roles.length)return this.$message.error("请选择角色");var e=this.form.id?s["k"]:s["i"];e(this.form).then((function(e){t.$message.success(e.msg),t.handleClose(),t.$emit("initData")})).catch((function(){}))},handleClose:function(t){Object.assign(this.$data,this.$options.data()),"function"===typeof t?t():this.dialogVisible=!1}}},u=c,d=a("2877"),f=Object(d["a"])(u,i,l,!1,null,"035404ae",null),m=f.exports,p={components:{adminForm:m},mixins:[r["a"]],data:function(){return{tableData:[],title:""}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.loading__=!0;var e={page:this.currentPage__,limit:this.limit__};Object(s["e"])(e).then((function(e){var a=e.data;t.tableData=a.list,t.total__=a.count,t.loading__=!1})).catch((function(){}))},add:function(){this.title="添加管理",this.openDialog(!1)},edit:function(t){this.title="编辑管理",this.openDialog(!0),this.$refs.adminForm.getDetail(t)},del:function(t){var e=this;this.$confirm("此操作将永久删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])(t).then((function(t){e.$message.success(t.msg),e.initData()})).catch((function(){}))})).catch((function(){}))},changeSwitch:function(t){var e=this,a=t.id,n=t.status,o={id:a,status:n};Object(s["l"])(o).then((function(t){e.$message.success("修改成功"),e.initData()})).catch((function(){}))},openDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.$refs.adminForm;e.dialogFormVisible=!0,e.isEdit=t,e.initData()}}},h=p,b=Object(d["a"])(h,n,o,!1,null,"2f17aa2f",null);e["default"]=b.exports},"90e7":function(t,e,a){"use strict";a.d(e,"h",(function(){return r})),a.d(e,"f",(function(){return i})),a.d(e,"j",(function(){return l})),a.d(e,"g",(function(){return s})),a.d(e,"m",(function(){return c})),a.d(e,"n",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"e",(function(){return f})),a.d(e,"i",(function(){return m})),a.d(e,"k",(function(){return p})),a.d(e,"a",(function(){return h})),a.d(e,"c",(function(){return b})),a.d(e,"d",(function(){return _})),a.d(e,"l",(function(){return g}));a("99af");var n=a("b775"),o="setting";function r(t){return Object(n["a"])({url:"".concat(o,"/role?page=").concat(t.page,"&limit=").concat(t.limit),method:"get"})}function i(){return Object(n["a"])({url:"".concat(o,"/role/create"),method:"get"})}function l(t){return Object(n["a"])({url:"".concat(o,"/role"),method:"post",data:t})}function s(t){return Object(n["a"])({url:"".concat(o,"/role/").concat(t),method:"get"})}function c(t){return Object(n["a"])({url:"".concat(o,"/role/").concat(t.id),method:"put",data:t})}function u(t){return Object(n["a"])({url:"".concat(o,"/updateStatus/").concat(t.id),method:"put",data:t})}function d(t){return Object(n["a"])({url:"".concat(o,"/role/").concat(t),method:"delete"})}function f(t){return Object(n["a"])({url:"".concat(o,"/admin?page=").concat(t.page,"&limit=").concat(t.limit),method:"get"})}function m(t){return Object(n["a"])({url:"".concat(o,"/admin"),method:"post",data:t})}function p(t){return Object(n["a"])({url:"".concat(o,"/admin/").concat(t.id),method:"put",data:t})}function h(t){return Object(n["a"])({url:"".concat(o,"/admin/").concat(t),method:"delete"})}function b(){return Object(n["a"])({url:"".concat(o,"/admin/create"),method:"get"})}function _(t){return Object(n["a"])({url:"".concat(o,"/admin/").concat(t),method:"get"})}function g(t){return Object(n["a"])({url:"".concat(o,"/updateAdminStatus/").concat(t.id),method:"put",data:t})}},a682:function(t,e,a){"use strict";e["a"]={data:function(){return{loading__:!0,currentPage__:1,limit__:20,total__:0}}}}}]);